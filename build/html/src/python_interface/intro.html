<!-- Based on https://stackoverflow.com/a/25543713/1130282 -->

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Introduction &#8212; mitsuba2 0.1.dev0 documentation</title>
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/theme_overrides.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Parsing XML code" href="parsing_xml.html" />
    <link rel="prev" title="Release notes" href="../../release_notes.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="parsing_xml.html" title="Parsing XML code"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../../release_notes.html" title="Release notes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">mitsuba2 0.1.dev0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction</a></li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    ../../index.html" class="text-logo">Mitsuba 2</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/intro.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/cloning.html">Cloning the repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/variants.html">选择变体</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/compiling.html">Compiling the system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/file_format.html">Scene file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/differences.html">Differences to Mitsuba 0.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Python interface</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#importing-the-renderer">Importing the renderer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-documentation">API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-arithmetic-types">Basic arithmetic types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#numpy-and-pytorch-integration">NumPy and PyTorch integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parsing_xml.html">Parsing XML code</a></li>
<li class="toctree-l1"><a class="reference internal" href="rendering_scene.html">Rendering a scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="bsdf_eval.html">Custom applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Inverse rendering</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../inverse_rendering/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inverse_rendering/diff_render.html">Differentiable rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inverse_rendering/advanced.html">More advanced examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inverse_rendering/pytorch.html">Integration with PyTorch</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/variants_cpp.html">Variants in C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/writing_plugin.html">Plugins &amp; Macros</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/building_documentation.html">Building the documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/polarization.html">Polarization</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced_topics/custom_plugins.html">Custom plugins in Python</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugin reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../plugin_reference/intro.html">Plugin reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html">Shapes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#bsdfs">BSDFs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#phase-functions">Phase functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#emitters">Emitters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#sensors">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#textures">Textures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#spectra">Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#integrators">Integrators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#samplers">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#films">Films</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/plugins.html#reconstruction-filters">Reconstruction filters</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/core_api.html">Core API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/render_api.html">Render API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/python_api.html">Python API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../zz_bibliography.html">Bibliography</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../../index.html">Docs</a></li>
              
              <li>Introduction</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="introduction">
<span id="sec-python"></span><h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>Mitsuba 2 为系统中的几乎每一个函数都提供了极其细颗粒度的 Python 绑定。这样就可以将渲染器导入到 Jupyter notebook 中，
从而可以通过交互方式开发新的算法，并用曲线图可视化它们的行为。</p>
<p>光线求交、BSDF 估算和光源以及许多其他系统组件可以通过高效的矢量化接口进行查询和采样，从而能够设计不一定
将渲染图作为输出的非传统应用程序。绑定模糊了 C++ 和 Python 世界之间的界限：例如，可以使用 Python 实现
一个新的 Mitsuba 插件（例如 BSDF），并使用它来渲染图像，其中大多数渲染代码都在 C++ 中运行。 有几个 Mitsuba
变体重度依赖 JIT 编译，这样的 Python 扩展是与系统的其他 C++ 部分一起进行 JIT 编译的。</p>
<p>Mitsuba 的自动化测试套件完全是用 Python 编写的，这确保了 Python 绑定的完整性和正确性，
同时也提供了优秀的 Python 示例代码。</p>
<p>这一节的其余部分提供了大量有关使用 Python API 的示例，并指明了附加信息来源。现在，我们主要关注绑定在“正向”渲染中
的应用。另有一组教程介绍了可微渲染和逆渲染的应用。</p>
<div class="section" id="importing-the-renderer">
<h2>Importing the renderer<a class="headerlink" href="#importing-the-renderer" title="Permalink to this headline">¶</a></h2>
<p>Mitsuba 2附带了许多种不同的系统变体，每个变体都提供了一组自己的 Python 绑定，由于替换了函数签名类型，
这些绑定之间互不相同。</p>
<p>要将 Mitsuba 导入到 Python 中，首先必须导入 <code class="docutils literal notranslate"><span class="pre">mitsuba</span></code>  模块并设置所需的变体。 在此之后，可
以导入特定的类。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mitsuba</span>

<span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;gpu_autodiff_spectral&#39;</span><span class="p">)</span>

<span class="c1"># set_variant() call must precede the following two lines</span>
<span class="kn">from</span> <span class="nn">mitsuba.core</span> <span class="kn">import</span> <span class="n">FileStream</span>
<span class="kn">from</span> <span class="nn">mitsuba.render</span> <span class="kn">import</span> <span class="n">Integrator</span>
</pre></div>
</div>
<p>Mitsuba 公开了一个 <em>虚拟 Python</em> 模块，该模块能够动态的解析导入语句到正确的位置。(比如通过 <code class="docutils literal notranslate"><span class="pre">set_variant()</span></code> 指定)。
变体名称可以随时更改，然后将应用于未来的导入。变体的名称是每个线程的属性多个独立的线程可以在不同的变体中执行代码。</p>
<p>为了与可用变体交互，在 Python 中提供了其他辅助函数。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns the list of available system variants</span>
<span class="n">mitsuba</span><span class="o">.</span><span class="n">variants</span><span class="p">()</span> <span class="c1"># e.g. [&#39;scalar_rgb&#39;, &#39;gpu_autodiff_spectral&#39;]</span>

<span class="c1"># Returns the name of the current variant</span>
<span class="n">mitsuba</span><span class="o">.</span><span class="n">variant</span><span class="p">()</span> <span class="c1"># e.g. &#39;gpu_autodiff_spectral&#39;</span>
</pre></div>
</div>
<dl class="simple">
<dt>如何在导入 <code class="docutils literal notranslate"><span class="pre">mitsuba</span></code> Python 模块时设置自动激活的变体呢？可以在 <code class="docutils literal notranslate"><span class="pre">mitsuba.conf</span></code> 文件里的</dt><dd><p><code class="docutils literal notranslate"><span class="pre">python-default</span></code> 中进行设置。按照这种方法操作之后，除非需要另一种变体，否则不再需要调用 <code class="docutils literal notranslate"><span class="pre">mitsuba.set_variant(..)</span></code> 了。</p>
</dd>
</dl>
</div>
<div class="section" id="api-documentation">
<h2>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<p>作为本文档的一部分，我们提供了丰富的 API 文档。详情请参阅 <a class="reference internal" href="../api_reference/intro.html#sec-api"><span class="std std-ref">Introduction</span></a> 。</p>
<p>除此之外，还可以使用 <code class="docutils literal notranslate"><span class="pre">help()</span></code> 函数获取有关类、函数的相关信息，通过这种方式获得 Python 绑定的文档字符串：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mitsuba</span>
<span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;scalar_rgb&#39;</span><span class="p">)</span>
<span class="n">help</span><span class="p">(</span><span class="n">mitsuba</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">Bitmap</span><span class="p">)</span>

<span class="c1"># Output:</span>
<span class="c1"># class Bitmap(Object)</span>
<span class="c1"># |  General-purpose bitmap class with read and write support for several</span>
<span class="c1"># |  common file formats.</span>
<span class="c1"># |</span>
<span class="c1"># |  This class handles loading of PNG, JPEG, BMP, TGA, as well as OpenEXR</span>
<span class="c1"># |  files, and it supports writing of PNG, JPEG and OpenEXR files.</span>
<span class="c1"># |</span>
<span class="c1"># |  PNG and OpenEXR files are optionally annotated with string-valued</span>
<span class="c1"># |  metadata, and the gamma setting can be stored as well. Please see the</span>
<span class="c1"># |  class methods and enumerations for further detail.</span>
<span class="c1"># |</span>
<span class="c1"># ...</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-arithmetic-types">
<h2>Basic arithmetic types<a class="headerlink" href="#basic-arithmetic-types" title="Permalink to this headline">¶</a></h2>
<p>Mitsuba 在基本算术类型、数学操作、向量、矩阵等方面重度依赖 <a class="reference external" href="https://enoki.readthedocs.io/en/master/intro.html">Enoki</a> 库。
Enoki 在 C++ 和 Python 端都有使用，推荐在开发任何 Mitsuba 代码之前先阅读一下 Enoki 的文档。</p>
<p>需要注意的一点是，像浮点数、向量等基本类型依赖于当前变体。方便起见，Mitsuba 提供了这些类型的别名。
例如，参考下面示例代码片段：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mitsuba</span>
<span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;scalar_rgb&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">mitsuba.core</span> <span class="kn">import</span> <span class="n">Float</span>
</pre></div>
</div>
<p>导入的 <code class="docutils literal notranslate"><span class="pre">Float</span></code> 类型只是一个简单的 Python 内置 <code class="docutils literal notranslate"><span class="pre">float</span></code>，因为渲染器是在 scalar 变体模式下运行的。
更复杂的类型将在矢量化的 <code class="docutils literal notranslate"><span class="pre">packet_*</span></code> 或 <code class="docutils literal notranslate"><span class="pre">gpu_*</span></code> 后端使用，并且这些也会传播到派生的数组类型中，如向
量或矩阵中。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;packet_rgb&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">mitsuba.core</span> <span class="kn">import</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Vector3f</span>
<span class="c1"># Float    = enoki.dynamic.Float32  (a.k.a. enoki::DynamicArray&lt;Packet&lt;float&gt;&gt;)</span>
<span class="c1"># Vector3f = enoki.dynamic.Vector3f (a.k.a. enoki::Array&lt;DynamicArray&lt;Packet&lt;float&gt;, 3&gt;&gt;)</span>

<span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;gpu_rgb&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">mitsuba.core</span> <span class="kn">import</span> <span class="n">Float</span><span class="p">,</span> <span class="n">Vector3f</span>
<span class="c1"># Float    = enoki.cuda.Float32  (a.k.a. enoki::CUDAArray&lt;float&gt;)</span>
<span class="c1"># Vector3f = enoki.cuda.Vector3f (a.k.a. enoki::Array&lt;enoki::CUDAArray&lt;float&gt;, 3&gt;&gt;)</span>
</pre></div>
</div>
<p>在某些情况下，可能希望使用 <em>标量的</em> 数值和向量，甚至用在矢量化后端中。在这种情况下，只需在任何类型名称之前添加 <code class="docutils literal notranslate"><span class="pre">Scalar</span></code> 前缀。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;gpu_rgb&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">mitsuba.core</span> <span class="kn">import</span> <span class="n">ScalarFloat</span><span class="p">,</span> <span class="n">ScalarVector3f</span>
<span class="c1"># ScalarFloat    = float</span>
<span class="c1"># ScalarVector3f = enoki.scalar.Vector3f (a.k.a. enoki::Array&lt;float, 3&gt;&gt;)</span>
</pre></div>
</div>
<p>总而言之，提供了以下基本类型：</p>
<div class="figure align-center" id="table-basic-types">
<center><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Mask</span></code></p></td>
<td><p>Result of a comparison involving an arithmetic type like <code class="docutils literal notranslate"><span class="pre">Float</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Float</span></code></p></td>
<td><p>Default floating point type (which could be single or double precision)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Float32</span></code></p></td>
<td><p>Single precision floating point type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Float64</span></code></p></td>
<td><p>Double precision floating point type</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UInt32</span></code></p></td>
<td><p>Unsigned 32-bit integer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Int32</span></code></p></td>
<td><p>Signed 32-bit integer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">UInt64</span></code></p></td>
<td><p>Unsigned 64-bit integer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Int64</span></code></p></td>
<td><p>Signed 64-bit integer</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Normal3f</span></code></p></td>
<td><p>3D normal vector</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Color[0-4]f</span></code></p></td>
<td><p>Color vector with floating point components of the default precision (0 to 4 dimensions).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Vector[0-4]f</span></code></p></td>
<td><p>Vector with floating point components of the default precision (0 to 4 dimensions)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Point[0-4]f</span></code></p></td>
<td><p>Point with floating point components of the default precision (0 to 4 dimensions)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Vector[0-4]i</span></code></p></td>
<td><p>Vector with signed 32-bit integer components (0 to 4 dimensions)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Point[0-4]i</span></code></p></td>
<td><p>Point with signed 32-bit integer components (0 to 4 dimensions)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Vector[0-4]u</span></code></p></td>
<td><p>Vector with unsigned signed 32-bit integer components (0 to 4 dimensions)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Point[0-4]u</span></code></p></td>
<td><p>Point with unsigned signed 32-bit integer components (0 to 4 dimensions)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Matrix[2-4]f</span></code></p></td>
<td><p>Matrix with floating point components of the default precision (2 to 4 dimensions)</p></td>
</tr>
</tbody>
</table>
<p class="caption"><span class="caption-text">此表列出了 Mitsuba 的内置算术和数组类型。</span></p>
</center></div><p id="table-basic-types">在下面的 Python 代码片段中，我们展示了如何依赖变体的选择使用这些别名编写可以在 CPU 或 GPU 上运行的通用代码。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">enoki</span> <span class="k">as</span> <span class="nn">ek</span>
<span class="kn">import</span> <span class="nn">mitsuba</span>

<span class="c1"># Choose the variant</span>
<span class="n">mitsuba</span><span class="o">.</span><span class="n">set_variant</span><span class="p">(</span><span class="s1">&#39;packet_rgb&#39;</span><span class="p">)</span> <span class="c1"># also works on the GPU, e.g. with &#39;gpu_rgb&#39;</span>

<span class="kn">from</span> <span class="nn">mitsuba.core</span> <span class="kn">import</span> <span class="n">Float</span><span class="p">,</span> <span class="n">UInt64</span><span class="p">,</span> <span class="n">Vector2f</span><span class="p">,</span> <span class="n">PCG32</span>

<span class="c1"># PCG32 is a pseudo-random number generator.</span>
<span class="c1"># Configure it for returning 1000 values at a time</span>
<span class="n">rng</span> <span class="o">=</span> <span class="n">PCG32</span><span class="p">(</span><span class="n">initseq</span><span class="o">=</span><span class="n">ek</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">UInt64</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c1"># Generate 1000 uniform random variates on [0, 1]^2</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">Vector2f</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">next_float32</span><span class="p">(),</span> <span class="n">rng</span><span class="o">.</span><span class="n">next_float32</span><span class="p">())</span>

<span class="c1"># Warp the uniform variates into uniformly distributed points on the sphere</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">mitsuba</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">warp</span><span class="o">.</span><span class="n">square_to_uniform_sphere</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="numpy-and-pytorch-integration">
<h2>NumPy and PyTorch integration<a class="headerlink" href="#numpy-and-pytorch-integration" title="Permalink to this headline">¶</a></h2>
<p>Enoki 序列与标准 Python 序列库比如 NumPy，PyTorch 之间的交互。例如，在前面的示例中，我们
可以将 <code class="docutils literal notranslate"><span class="pre">samples</span></code> 变量的赋值替换为：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">sample_count</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>随后的 <code class="docutils literal notranslate"><span class="pre">square_to_uniform_sphere</span></code> 调用将执行隐式转换。同样，Enoki 序列可以转换为 PyTorch 或 NumPy 序
列，随后可以使用 Matplotlib 等库进行绘制。</p>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<p>Mitsuba Python 绑定分为三个子模块：</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Submodule name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mitsuba.core</span></code></p></td>
<td><p>Python bindings for the <span class="monosp">libcore</span> C++ library, which contains
core functionality that is not directly related to rendering
algorithms. (→ <a class="reference internal" href="../../generated/core_api.html#sec-api-core"><span class="std std-ref">Core API Reference</span></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">mitsuba.render</span></code></p></td>
<td><p>Python bindings for the <span class="monosp">librender</span> C++ library, which contains
interfaces of components like rendering algorithms, sensors, emitters,
textures, participating media, etc. (→ <a class="reference internal" href="../../generated/render_api.html#sec-api-render"><span class="std std-ref">Render API Reference</span></a>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mitsuba.python</span></code></p></td>
<td><p>Higher-level functionality that is developed in Python: infrastructure
for automatic differentiation, testing (Chi^2 test), etc. (→
<a class="reference internal" href="../../generated/python_api.html#sec-api-python"><span class="std std-ref">Python API Reference</span></a>)</p></td>
</tr>
</tbody>
</table>
<p>随后 <a class="reference internal" href="../api_reference/intro.html#sec-api"><span class="std std-ref">API reference</span></a> 章节提供了有关其内容的更多详细信息。</p>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="../../release_notes.html" title="previous chapter (use the left arrow)">Release notes</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="parsing_xml.html" title="next chapter (use the right arrow)">Parsing XML code</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="parsing_xml.html" title="Parsing XML code"
             >next</a> |</li>
        <li class="right" >
          <a href="../../release_notes.html" title="Release notes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">mitsuba2 0.1.dev0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Introduction</a></li> 
      </ul>
    </div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>